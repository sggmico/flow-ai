---
name: post_write
description: 生成或优化技术文章正文并输出 JSON（title+content）。用于用户要求写技术文章、润色文章、综合多篇参考文或"mode=0/1/2"的写作任务时。
---

# Write Article Body

面向技术文章的专业写作与优化，输出可发布的 Markdown 正文与标题。

## 快速开始

先确认输入类型与 `mode`，再按对应路径产出 JSON（title+content）。

## 输入

- `ARTICLE_CONTEXT`：文章/笔记/分析报告。
- `mode`：0=基于对话/笔记生成，1=优化已有文章，2=基于分析报告综合创作。
- `length`：short/medium/long。

## 输出

必须输出 JSON：
```json
{
  "title": "文章标题",
  "content": "完整 Markdown 正文"
}
```

---

## 风格锚点（低成本）

动作:
- 风格-锚点-套用
- 结构-模板-对齐

规则:
- 输出结构以 `references/style-profile.md` 为准
- 仅增加结构一致性，不新增其它规范

---

## 开源文章规范（GitHub / 公众号）

目标：内容中立、可复用、可验证，避免营销和引流话术。

- **语气**：技术说明口吻，避免“推广、引导、关注、Star”等表达。
- **措辞**：避免“本项目/本仓库”，改用“实际项目/示例项目/实战案例”。
- **实战引用**：出现代码路径时给出明确文件路径，避免笼统指代。
- **移动端可读性**：段落短，列表清晰；长段拆分为 3-5 行。
- **社区适配**：开头强调结论与适用范围，结尾提供中性的“延伸阅读方向”。

---

## 可视化规范（Mermaid 优先）

- **优先使用 Mermaid**：用于流程/分层/决策树，替代 ASCII。
- **默认尺寸**：在每个 Mermaid 块加入初始化配置：
  - `fontSize: 12px`
  - `nodeSpacing: 20`
  - `rankSpacing: 20`
- **布局**：移动端优先 `flowchart TD`，控制在 6-8 个节点内。
- **标题**：每个图前给一句说明，避免悬空图表。

---

## 核心写作流程

### 阶段 1: 模式识别

- **mode=1** 或输入为完整文章 → 优化润色路径
- **mode=2** 或输入为分析报告 → 综合创作路径
- **mode=0** 或输入为笔记/摘要 → 从零生成路径

### 阶段 2: 内容创作

根据识别的路径，生成或优化文章内容：
- 遵循强制格式要求
- 确保技术准确性
- 包含实际可运行的代码示例
- 避免大段无关重写，聚焦质量提升

### 阶段 3: 三遍审校（⭐ 核心质量保证）

**这是整个流程中最关键的一步，必须严格执行每一项检查。**

---

## ⭐ 三遍审校详细标准 ⭐

### 第一遍：内容审校（逻辑、事实、结构）

#### 事实准确性检查

**必须检查的项目**：
- ✅ 数据准确？（版本号、时间、产品名称）
- ✅ 技术细节正确？（API、配置、命令）
- ✅ 引用来源可靠？（标注出处）
- ✅ 无编造内容？（所有数据和案例都真实）

**常见错误示例**：
- ❌ "Node.js 20 支持 ES2023" → 验证版本号和特性支持
- ❌ "这个 API 从 2022 年开始支持" → 验证准确的发布时间
- ❌ "大多数开发者认为..." → 需要具体数据或来源支持

#### 逻辑清晰性检查

**必须检查的项目**：
- ✅ 前后无矛盾？
- ✅ 论证有依据？
- ✅ 结论合理？
- ✅ 因果关系明确？

**修复示例**：
- ❌ "这个方法性能更好，但我推荐用另一个方法"（矛盾）
- ✅ "虽然这个方法性能更好，但考虑到维护成本，我推荐..."（逻辑清晰）

#### 结构合理性检查

**必须检查的项目**：
- ✅ 无跑题？（每个章节都服务于主题）
- ✅ 重点突出？（关键信息在显眼位置）
- ✅ 过渡自然？（章节之间有合理衔接）
- ✅ 详略得当？（重要部分详细，次要部分简洁）

---

### 第二遍：风格审校（AI味降重）⭐⭐⭐⭐⭐

**目标**：去掉 AI 味，增加人味。

#### 🚫 删除 AI 套话（强制执行）

**严禁使用以下套话**：

**开头常见套话**：
- ❌ "在当今时代"
- ❌ "随着…的发展"
- ❌ "近年来"
- ❌ "众所周知"

**过渡常见套话**：
- ❌ "综上所述"
- ❌ "总而言之"
- ❌ "换句话说"
- ❌ "值得注意的是"
- ❌ "需要指出的是"

**强调常见套话**：
- ❌ "显而易见"
- ❌ "毫无疑问"
- ❌ "不可否认"
- ❌ "事实上"

**检测方法**：搜索这些关键词，全部删除或改写。

---

#### 🔧 拆解 AI 句式（强制执行）

**禁止的句式模式**：

**连续"不是...而是..."**：
- ❌ "这不是一个简单的工具，而是一个完整的解决方案"
- ✅ "这是一个完整的解决方案，不止是个简单工具"

**大量排比句**：
- ❌ "它提供了强大的功能、灵活的配置、丰富的扩展、完善的文档"
- ✅ "功能强大，配置灵活。文档也很完善"

**过度使用"首先、其次、最后"**：
- ❌ "首先，我们需要安装依赖。其次，配置环境变量。最后，运行测试"
- ✅ "先装依赖，配好环境变量，跑一下测试"

**检测方法**：朗读文章，听起来像"写作文"的地方就需要改。

---

#### 📝 替换书面词汇（强制执行）

**常见书面词汇对照表**：

| ❌ AI 书面词汇 | ✅ 自然表达 |
|---------------|-----------|
| "显著提升" | 具体数字（"提升 50%"） |
| "大幅降低" | 具体数字（"从 10 秒降到 2 秒"） |
| "充分利用" | "用好"、"善用" |
| "进行操作" | 直接用动词（"点击"、"配置"） |
| "实现功能" | "做到"、"搞定" |
| "相关参数" | "这几个参数" |
| "具体情况" | 直接说明（"根据你的项目类型"） |
| "众多优势" | 列举 2-3 个（"快、稳定、易用"） |
| "深入了解" | "搞清楚"、"弄明白" |
| "有效解决" | "解决"（去掉"有效"） |

**检测方法**：找出所有形容词和副词，80% 应该被删除或替换。

---

#### 🎯 增加真实细节（强制执行）

**从抽象到具体的转换**：

**数字化**：
- ❌ "很多用户反馈..."
- ✅ "500+ 用户反馈..."

- ❌ "性能显著提升"
- ✅ "构建时间从 45 秒降到 12 秒"

**案例化**：
- ❌ "在实际项目中很有用"
- ✅ "我在一个 10 万行代码的项目中用过，省了不少时间"

**对比化**：
- ❌ "比其他方案更好"
- ✅ "比 Webpack 快 3 倍，配置只需要 5 行"

**检测方法**：每个段落至少要有 1 个具体的数字、案例或对比。

---

#### 💬 增加个人态度（强制执行）

**从中立到有观点**：

**明确推荐**：
- ❌ "这个工具值得尝试"
- ✅ "我用了两周，确实比 XX 好用"

**坦诚缺点**：
- ❌ "该方案具有一定局限性"
- ✅ "有个问题：配置稍微有点复杂"

**分享经验**：
- ❌ "使用时需要注意..."
- ✅ "我踩过坑：第一次用的时候忘了..."

**检测方法**：文章中至少要有 3-5 处体现作者的真实经验和观点。

---

#### 📋 改写示例对比

**示例 1: 开头段落**

❌ **AI 味重**：
```
在当今 AI 技术飞速发展的时代，编程工具也在不断进化。Claude Code
作为一款新兴的 AI 编程助手，具有诸多显著优势，能够有效提升开发
效率。本文将深入探讨 Claude Code 的核心功能与最佳实践。
```

✅ **自然表达**：
```
Claude Code 出了。我用了两周，确实比 Cursor 好用。

最大的感觉：代码审查准多了，自动补全的上下文理解也更好。这篇文章
分享下我的使用经验，包括几个提效的小技巧。
```

**示例 2: 功能介绍**

❌ **AI 味重**：
```
该功能提供了强大的代码生成能力，能够根据用户需求自动生成高质量
代码，显著降低开发成本，提升团队协作效率。
```

✅ **自然表达**：
```
这个功能能根据你的注释生成代码。我测了下，准确率大概 85%。
对于重复性高的 CRUD 代码特别有用，能省不少时间。
```

**示例 3: 技术对比**

❌ **AI 味重**：
```
与传统方案相比，新方案在性能、可维护性、扩展性等方面都有明显
优势，是一个值得推荐的解决方案。
```

✅ **自然表达**：
```
对比旧方案：
- 构建速度：从 45 秒降到 12 秒
- 配置复杂度：从 200 行配置减到 20 行
- 唯一缺点：需要 Node.js 18+

整体来说值得升级。
```

---

### 第三遍：细节打磨（标点、排版、节奏）

#### 句子长度检查

**标准**：
- ✅ 主力句长：15-25 字
- ⚠️ 绝对上限：30 字
- 🔧 超长句处理：拆成 2-3 个短句

**检测方法**：
```
统计每个句子的字数：
- 10 字以下：太短，可能需要合并
- 15-25 字：✅ 理想
- 26-30 字：⚠️ 可接受，但尽量减少
- 31 字以上：❌ 必须拆分
```

**修复示例**：
- ❌ "为了实现这个功能，我们需要首先安装必要的依赖包，然后配置相应的环境变量，最后运行测试脚本来验证配置是否正确"（42 字）
- ✅ "先装依赖包，配好环境变量。然后跑测试脚本，验证配置对不对"（25 字）

---

#### 段落长度检查

**标准**：
- ✅ 理想长度：手机屏幕 3-5 行（约 60-120 字）
- ⚠️ 最大长度：不超过 7 行（约 150 字）
- 🔧 超长段落：拆分为多个小段

**拆分策略**：
1. 按逻辑层次拆分
2. 用空行分隔不同主题
3. 代码块前后留空行
4. 列表前后留空行

**修复示例**：
- ❌ 一大段 200 字的连续文本
- ✅ 拆成 3 个小段，每段 60-70 字

---

#### 标点使用检查

**规范**：

**句号优先**：
- ✅ 多用句号（。）结束完整意思
- ❌ 少用逗号（,）连接长句

**问号使用**：
- ✅ 引导思考："为什么需要这个功能？"
- ✅ 吸引注意："你有没有遇到过这种情况？"

**感叹号使用**：
- ⚠️ 谨慎使用，避免过度
- ✅ 强调重要信息："注意！这里容易出错"

**冒号使用**：
- ✅ 引出列表："支持三种模式：开发、测试、生产"
- ✅ 引出说明："原因很简单：性能更好"

**修复示例**：
- ❌ "首先安装依赖，然后配置环境，接着运行测试，最后部署上线，这样就完成了整个流程"
- ✅ "安装依赖。配置环境。跑测试。部署上线。流程完成"

---

#### 节奏变化检查

**目标**：长短句交替，快慢结合，避免单调。

**节奏模式**：

**快节奏**（短句）：
```
安装简单。配置也简单。跑起来就行。
```
→ 适用于：操作步骤、关键要点

**慢节奏**（长句）：
```
这个功能的设计思路是基于事件驱动模型，通过监听用户操作来
触发相应的处理函数。
```
→ 适用于：原理解释、复杂概念

**理想搭配**：
```
这个功能很强大。（短）

它采用事件驱动模型，通过监听用户操作触发处理函数，整个流程
响应速度在 50ms 以内。（长）

用起来很简单。（短）
```

**检测方法**：大声朗读，感受节奏是否自然。

---

## 强制格式要求

### 正文开头格式

**必须包含**（按顺序）：
1. 一级标题（# 标题）
2. 日期（MMM DD, YYYY 格式）
3. 关键词行（固定格式）
4. 分隔线（---）

**示例**：
```markdown
# Claude Code 使用指南

Dec 20, 2025

> **关键词：** `Claude Code` · `AI编程` · `效率提升`

---

[正文开始...]
```

### 章节标题规范

**规则**：
- ✅ 使用 ## 或 ### 标记
- ❌ 标题中不要使用 emoji
- ✅ 标题简洁明确（5-12 字）
- ✅ 使用层次清晰的结构

**示例**：
```markdown
## 核心功能

### 代码生成

### 代码审查

## 最佳实践

### 提示词优化

### 工作流集成
```

### 代码块规范

**规则**：
- ✅ 必须指定语言：```typescript、```bash、```json
- ✅ 代码必须可运行（避免伪代码）
- ✅ 添加必要的注释
- ✅ 代码块前后留空行

**示例**：
````markdown
安装依赖：

```bash
npm install claude-code
```

配置文件示例：

```typescript
// claude.config.ts
export default {
  model: 'sonnet',
  temperature: 0.7
};
```
````

---

## 特殊模式处理

### mode=2: 综合创作模式

当 `mode=2` 时，输入的 `ARTICLE_CONTEXT` 是 `analyze-references` skill
生成的分析报告（JSON 格式）。

**必须严格遵循分析报告中的综合方案**：

1. **阅读分析报告**：
   - 理解每篇参考文章的优点和不足
   - 理解综合设计方案的建议

2. **实施综合方案**：
   - 采用建议的内容架构
   - 体现所有核心特色
   - 实现所有差异化价值

3. **创作融合文章**：
   - 有机融合，而非简单拼凑
   - 结构设计优于任何一篇参考文章
   - 内容深度超越参考文章（综合 > 单篇）

**质量标准**：
- ✅ 忠实于分析报告的建议
- ✅ 结构清晰，层次分明
- ✅ 内容完整，无遗漏
- ✅ 差异化价值明显

---

## 执行清单

在输出 JSON 之前，必须完成以下检查：

### 内容审校
- [ ] 事实准确性检查完成
- [ ] 逻辑清晰性检查完成
- [ ] 结构合理性检查完成

### 风格审校
- [ ] AI 套话已全部删除
- [ ] AI 句式已全部拆解
- [ ] 书面词汇已替换为自然表达
- [ ] 增加了具体数字/案例/对比
- [ ] 增加了个人态度/观点/经验

### 细节打磨
- [ ] 句子长度检查（15-25 字为主）
- [ ] 段落长度检查（3-5 行）
- [ ] 标点使用检查（多句号少逗号）
- [ ] 节奏变化检查（长短句交替）

### 格式规范
- [ ] 标题与日期在开头
- [ ] 关键词行格式正确
- [ ] 章节标题无 emoji
- [ ] 代码块指定了语言
- [ ] 代码块前后有空行

**只有全部检查通过后，才能输出 JSON。**

---

## 最后提醒

**核心原则**：
1. 去掉 AI 味，增加人味
2. 用具体数字替代抽象表达
3. 用真实案例替代空泛描述
4. 用明确观点替代中立客观

**质量标准**：
- 读起来像一个有经验的工程师在分享真实体验
- 不是在"写作文"，而是在"聊技术"
- 每个段落都有价值，没有废话

**输出要求**：
- 只输出 JSON，不附带任何解释文字
- JSON 格式必须正确，可被解析
- content 字段必须是完整的 Markdown 文本
